<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="学习,笔记,SQL," />





  <link rel="alternate" href="/atom.xml" title="一方天地" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico?v=5.0.1" />






<meta name="description" content="学习SQL，教程来自w3schools。">
<meta property="og:type" content="article">
<meta property="og:title" content="SQL 学习笔记之一">
<meta property="og:url" content="http://rrkaige.com/2016/11/28/SQL学习笔记之一/index.html">
<meta property="og:site_name" content="一方天地">
<meta property="og:description" content="学习SQL，教程来自w3schools。">
<meta property="og:image" content="http://ob0mgqhy4.bkt.clouddn.com/20161128-myblog122.png">
<meta property="og:updated_time" content="2016-11-30T15:07:10.471Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SQL 学习笔记之一">
<meta name="twitter:description" content="学习SQL，教程来自w3schools。">
<meta name="twitter:image" content="http://ob0mgqhy4.bkt.clouddn.com/20161128-myblog122.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: false,
    motion: true,
    duoshuo: {
      userId: 6312606111681742000,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://rrkaige.com/2016/11/28/SQL学习笔记之一/"/>

  <title> SQL 学习笔记之一 | 一方天地 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">一方天地</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">面朝大海，春暖花开</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-bars"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-setup">
          <a href="/setup" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-anchor"></i> <br />
            
            建站
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
	  
	  <script charset="Shift_JIS" src="http://chabudai.sakura.ne.jp/blogparts/honehoneclock/honehone_clock_tr.js"></script>
	  
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">

 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                SQL 学习笔记之一
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-11-28T10:03:11+08:00" content="2016-11-28">
              2016-11-28
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Web征途/" itemprop="url" rel="index">
                    <span itemprop="name">Web征途</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/11/28/SQL学习笔记之一/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/11/28/SQL学习笔记之一/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
             <span id="/2016/11/28/SQL学习笔记之一/" class="leancloud_visitors" data-flag-title="SQL 学习笔记之一">
               &nbsp; | &nbsp;
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               <span class="post-meta-item-text">热度 </span>
               <span class="leancloud-visitors-count"></span>
              </span>
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p> 学习 SQL，教程来自 <a href="http://www.w3schools.com/sql/default.asp" target="_blank" rel="external">w3schools</a>。</p>
<p><img src="http://ob0mgqhy4.bkt.clouddn.com/20161128-myblog122.png" alt="SQL"></p>
<a id="more"></a>
<h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>SQL is a standard language for accessing and manipulating databases.</p>
<ul>
<li>SQL stands for <strong>Structured Query Language</strong></li>
<li>SQL lets you access and manipulate databases</li>
<li>SQL is an ANSI (American National Standards Institute) standard</li>
</ul>
<p><strong>Note:</strong> Most of the SQL database programs also have their own proprietary extensions in addition to the SQL standard!</p>
<p>To build a web site that shows data from a database, you will need:</p>
<ul>
<li>An RDBMS database program (i.e. MS Access, SQL Server, MySQL)</li>
<li>To use a server-side scripting language, like PHP or ASP</li>
<li>To use SQL to get the data you want</li>
<li>To use HTML / CSS</li>
</ul>
<p>RDBMS stands for <strong>Relational Database Management System</strong>.</p>
<p>RDBMS is the basis for SQL, and for all modern database systems such as MS SQL Server, IBM DB2, Oracle, MySQL, and Microsoft Access.</p>
<p>The data in RDBMS is stored in database objects called tables. A table is a collection of related data entries and it consists of columns and rows.</p>
<h3 id="Syntax"><a href="#Syntax" class="headerlink" title="Syntax"></a>Syntax</h3><p>SQL keywords are <strong>NOT case sensitive</strong>: select is the same as SELECT.</p>
<p>Some database systems require a semicolon at the end of each SQL statement. Semicolon is the standard way to separate each SQL statement in database systems that allow more than one SQL statement to be executed in the same call to the server.</p>
<h3 id="SELECT-Statement"><a href="#SELECT-Statement" class="headerlink" title="SELECT Statement"></a>SELECT Statement</h3><p>The <strong>SELECT</strong> statement is used to select data from a database. The result is stored in a result table, called the <strong>result-set</strong>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SELECT column_name,column_name</div><div class="line">FROM table_name;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SELECT * FROM Customers;</div></pre></td></tr></table></figure>
<h3 id="SELECT-DISTINCT-Statement"><a href="#SELECT-DISTINCT-Statement" class="headerlink" title="SELECT DISTINCT Statement"></a>SELECT DISTINCT Statement</h3><p>In a table, a column may contain many duplicate values; and sometimes you only want to list the different (distinct) values.</p>
<p>The <strong>DISTINCT</strong> keyword can be used to return only distinct (different) values.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SELECT DISTINCT column_name,column_name</div><div class="line">FROM table_name;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SELECT DISTINCT City FROM Customers;</div></pre></td></tr></table></figure>
<h3 id="WHERE-Clause"><a href="#WHERE-Clause" class="headerlink" title="WHERE Clause"></a>WHERE Clause</h3><p>The <strong>WHERE</strong> clause is used to extract only those records that fulfill a specified criterion.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">SELECT column_name,column_name</div><div class="line">FROM table_name</div><div class="line">WHERE column_name operator value;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SELECT * FROM Customers</div><div class="line">WHERE Country=&apos;Mexico&apos;;</div></pre></td></tr></table></figure>
<p>SQL requires single quotes around text values (most database systems will also allow double quotes). However, numeric fields should not be enclosed in quotes:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SELECT * FROM Customers</div><div class="line">WHERE CustomerID=1;</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>Equal</td>
</tr>
<tr>
<td>&lt;&gt;</td>
<td>Not equal. Note: In some versions of SQL this operator may be written as !=</td>
</tr>
<tr>
<td>&gt;</td>
<td>Greater than</td>
</tr>
<tr>
<td>&lt;</td>
<td>Less than</td>
</tr>
<tr>
<td>&gt;=</td>
<td>Greater than or equal</td>
</tr>
<tr>
<td>&lt;=</td>
<td>Less than or equal</td>
</tr>
<tr>
<td>BETWEEN</td>
<td>Between an inclusive range</td>
</tr>
<tr>
<td>LIKE</td>
<td>Search for a pattern</td>
</tr>
<tr>
<td>IN</td>
<td>To specify multiple possible values for a column</td>
</tr>
</tbody>
</table>
<h3 id="AND-amp-OR-Operators"><a href="#AND-amp-OR-Operators" class="headerlink" title="AND &amp; OR Operators"></a>AND &amp; OR Operators</h3><p>The <strong>AND</strong> &amp; <strong>OR</strong> operators are used to filter records based on more than one condition.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">SELECT * FROM Customers</div><div class="line">WHERE Country=&apos;Germany&apos;</div><div class="line">AND (City=&apos;Berlin&apos; OR City=&apos;München&apos;);</div></pre></td></tr></table></figure>
<h3 id="ORDER-BY-Keyword"><a href="#ORDER-BY-Keyword" class="headerlink" title="ORDER BY Keyword"></a>ORDER BY Keyword</h3><p>The <strong>ORDER BY</strong> keyword is used to sort the result-set by one or more columns.</p>
<p>The ORDER BY keyword sorts the records in ascending order by default. To sort the records in a descending order, you can use the DESC keyword.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">SELECT column_name, column_name</div><div class="line">FROM table_name</div><div class="line">ORDER BY column_name ASC|DESC, column_name ASC|DESC;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SELECT * FROM Customers</div><div class="line">ORDER BY Country ASC, CustomerName DESC;</div></pre></td></tr></table></figure>
<h3 id="INSERT-INTO-Statement"><a href="#INSERT-INTO-Statement" class="headerlink" title="INSERT INTO Statement"></a>INSERT INTO Statement</h3><p>The <strong>INSERT INTO</strong> statement is used to insert new records in a table.</p>
<p>It is possible to write the INSERT INTO statement in two forms.</p>
<ul>
<li>The first form does not specify the column names where the data will be inserted, only their values:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">INSERT INTO table_name</div><div class="line">VALUES (value1,value2,value3,...);</div></pre></td></tr></table></figure>
<ul>
<li>The second form specifies both the column names and the values to be inserted:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">INSERT INTO table_name (column1,column2,column3,...)</div><div class="line">VALUES (value1,value2,value3,...);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">INSERT INTO Customers (CustomerName, City, Country)</div><div class="line">VALUES (&apos;Cardinal&apos;, &apos;Stavanger&apos;, &apos;Norway&apos;);</div></pre></td></tr></table></figure>
<h3 id="UPDATE-Statement"><a href="#UPDATE-Statement" class="headerlink" title="UPDATE Statement"></a>UPDATE Statement</h3><p>The <strong>UPDATE</strong> statement is used to update existing records in a table.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">UPDATE table_name</div><div class="line">SET column1=value1,column2=value2,...</div><div class="line">WHERE some_column=some_value;</div></pre></td></tr></table></figure>
<p><strong>Note:</strong> The WHERE clause specifies which record or records that should be updated. If you omit the WHERE clause, all records will be updated!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">UPDATE Customers</div><div class="line">SET ContactName=&apos;Alfred Schmidt&apos;, City=&apos;Hamburg&apos;</div><div class="line">WHERE CustomerName=&apos;Alfreds Futterkiste&apos;;</div></pre></td></tr></table></figure>
<h3 id="DELETE-Statement"><a href="#DELETE-Statement" class="headerlink" title="DELETE Statement"></a>DELETE Statement</h3><p>The <strong>DELETE</strong> statement is used to delete rows in a table.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">DELETE FROM table_name</div><div class="line">WHERE some_column=some_value;</div></pre></td></tr></table></figure>
<p><strong>Note:</strong> The WHERE clause specifies which record or records that should be deleted. If you omit the WHERE clause, all records will be deleted!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">DELETE FROM Customers</div><div class="line">WHERE CustomerName=&apos;Alfreds Futterkiste&apos; AND ContactName=&apos;Maria Anders&apos;;</div></pre></td></tr></table></figure>
<p>It is possible to delete all rows in a table without deleting the table. This means that the table structure, attributes, and indexes will be intact:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">DELETE FROM table_name;</div><div class="line"></div><div class="line">or</div><div class="line"></div><div class="line">DELETE * FROM table_name;</div></pre></td></tr></table></figure>
<p><strong>Note:</strong> Be very careful when deleting records. You cannot undo this statement!</p>
<h3 id="Injection"><a href="#Injection" class="headerlink" title="Injection"></a>Injection</h3><p>SQL injection is a technique where malicious users can inject SQL commands into an SQL statement, via web page input.</p>
<p>Injected SQL commands can alter SQL statement and compromise the security of a web application.</p>
<h4 id="Based-on-1-1-is-Always-True"><a href="#Based-on-1-1-is-Always-True" class="headerlink" title="Based on 1=1 is Always True"></a>Based on 1=1 is Always True</h4><p>A smart hacker might get access to all the user names and passwords in a database by simply inserting <code>105 or 1=1</code> into the input box.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SELECT UserId, Name, Password FROM Users WHERE UserId = 105 or 1=1;</div></pre></td></tr></table></figure>
<h4 id="Based-on-“”-””-is-Always-True"><a href="#Based-on-“”-””-is-Always-True" class="headerlink" title="Based on “”=”” is Always True"></a>Based on “”=”” is Always True</h4><p>A smart hacker might get access to user names and passwords in a database by simply inserting <code>&quot; or &quot;&quot;=&quot;</code> into the user name or password text box.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SELECT * FROM Users WHERE Name =&quot;&quot; or &quot;&quot;=&quot;&quot; AND Pass =&quot;&quot; or &quot;&quot;=&quot;&quot;</div></pre></td></tr></table></figure>
<h4 id="Based-on-Batched-SQL-Statements"><a href="#Based-on-Batched-SQL-Statements" class="headerlink" title="Based on Batched SQL Statements"></a>Based on Batched SQL Statements</h4><p>Most databases support batched SQL statement, separated by semicolon.</p>
<p>User id: <code>105; DROP TABLE Suppliers</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SELECT * FROM Users WHERE UserId = 105; DROP TABLE Suppliers</div></pre></td></tr></table></figure>
<h4 id="Parameters-for-Protection"><a href="#Parameters-for-Protection" class="headerlink" title="Parameters for Protection"></a>Parameters for Protection</h4><p>Some web developers use a “blacklist” of words or characters to search for in SQL input, to prevent SQL injection attacks.</p>
<p>This is not a very good idea. Many of these words (like delete or drop) and characters (like semicolons and quotation marks), are used in common language, and should be allowed in many types of input.</p>
<p>(In fact it should be perfectly legal to input an SQL statement in a database field.)</p>
<p>The only proven way to protect a web site from SQL injection attacks, is to use <strong>SQL parameters</strong>.</p>
<p>SQL parameters are values that are added to an SQL query at execution time, in a controlled manner.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">txtUserId = getRequestString(&quot;UserId&quot;);</div><div class="line">txtSQL = &quot;SELECT * FROM Users WHERE UserId = @0&quot;;</div><div class="line">db.Execute(txtSQL,txtUserId);</div></pre></td></tr></table></figure>
<p>Note that parameters are represented in the SQL statement by a @ marker.</p>
<p>The SQL engine checks each parameter to ensure that it is correct for its column and are treated literally, and not as part of the SQL to be executed.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">txtNam = getRequestString(&quot;CustomerName&quot;);</div><div class="line">txtAdd = getRequestString(&quot;Address&quot;);</div><div class="line">txtCit = getRequestString(&quot;City&quot;);</div><div class="line">txtSQL = &quot;INSERT INTO Customers (CustomerName,Address,City) Values(@0,@1,@2)&quot;;</div><div class="line">db.Execute(txtSQL,txtNam,txtAdd,txtCit);</div></pre></td></tr></table></figure>
<h3 id="SELECT-TOP-Clause"><a href="#SELECT-TOP-Clause" class="headerlink" title="SELECT TOP Clause"></a>SELECT TOP Clause</h3><p>The <strong>SELECT TOP</strong> clause is used to specify the number of records to return.</p>
<p><strong>Note:</strong> Not all database systems support the SELECT TOP clause.</p>
<ul>
<li>SQL Server / MS Access Syntax</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SELECT TOP number|percent column_name(s)</div><div class="line">FROM table_name;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SELECT TOP 50 PERCENT * FROM Customers;</div></pre></td></tr></table></figure>
<ul>
<li>MySQL Syntax</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">SELECT column_name(s)</div><div class="line">FROM table_name</div><div class="line">LIMIT number;</div></pre></td></tr></table></figure>
<ul>
<li>Oracle Syntax</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">SELECT column_name(s)</div><div class="line">FROM table_name</div><div class="line">WHERE ROWNUM &lt;= number;</div></pre></td></tr></table></figure>
<h3 id="LIKE-Operator"><a href="#LIKE-Operator" class="headerlink" title="LIKE Operator"></a>LIKE Operator</h3><p>The <strong>LIKE</strong> operator is used in a WHERE clause to search for a specified pattern in a column.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">SELECT column_name(s)</div><div class="line">FROM table_name</div><div class="line">WHERE column_name LIKE pattern;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SELECT * FROM Customers</div><div class="line">WHERE City LIKE &apos;s%&apos;;</div></pre></td></tr></table></figure>
<p>Using the <strong>NOT</strong> keyword allows you to select records that do NOT match the pattern.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SELECT * FROM Customers</div><div class="line">WHERE Country NOT LIKE &apos;%land%&apos;;</div></pre></td></tr></table></figure>
<h3 id="Wildcards"><a href="#Wildcards" class="headerlink" title="Wildcards"></a>Wildcards</h3><p>A wildcard character can be used to substitute for any other character(s) in a string.</p>
<p>In SQL, wildcard characters are used with the SQL LIKE operator. SQL wildcards are used to search for data within a table. </p>
<table>
<thead>
<tr>
<th>Wildcard</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>%</td>
<td>A substitute for zero or more characters</td>
</tr>
<tr>
<td>_</td>
<td>A substitute for a single character</td>
</tr>
<tr>
<td>[charlist]</td>
<td>Sets and ranges of characters to match</td>
</tr>
<tr>
<td>[^charlist] or [!charlist]</td>
<td>Matches only a character NOT specified within the brackets</td>
</tr>
</tbody>
</table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SELECT * FROM Customers</div><div class="line">WHERE City LIKE &apos;L_n_on&apos;;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SELECT * FROM Customers</div><div class="line">WHERE City LIKE &apos;[a-c]%&apos;;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SELECT * FROM Customers</div><div class="line">WHERE City LIKE &apos;[!bsp]%&apos;;</div></pre></td></tr></table></figure>
<h3 id="IN-Operator"><a href="#IN-Operator" class="headerlink" title="IN Operator"></a>IN Operator</h3><p>The <strong>IN</strong> operator allows you to specify multiple values in a WHERE clause.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">SELECT column_name(s)</div><div class="line">FROM table_name</div><div class="line">WHERE column_name IN (value1,value2,...);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SELECT * FROM Customers</div><div class="line">WHERE City IN (&apos;Paris&apos;,&apos;London&apos;);</div></pre></td></tr></table></figure>
<h3 id="BETWEEN-Operator"><a href="#BETWEEN-Operator" class="headerlink" title="BETWEEN Operator"></a>BETWEEN Operator</h3><p>The <strong>BETWEEN</strong> operator is used to select values within a range. The values can be numbers, text, or dates.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">SELECT column_name(s)</div><div class="line">FROM table_name</div><div class="line">WHERE column_name BETWEEN value1 AND value2;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">SELECT * FROM Products</div><div class="line">WHERE (Price BETWEEN 10 AND 20)</div><div class="line">AND NOT CategoryID IN (1,2,3);</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SELECT * FROM Products</div><div class="line">WHERE ProductName BETWEEN &apos;C&apos; AND &apos;M&apos;;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">SELECT * FROM Orders</div><div class="line">WHERE OrderDate BETWEEN #07/04/1996# AND #07/09/1996#;</div></pre></td></tr></table></figure>
<p><strong>Note:</strong></p>
<ul>
<li>In some databases, BETWEEN selects fields that are between and excluding the test values.</li>
<li>In other databases, BETWEEN selects fields that are between and including the test values.</li>
<li>And in other databases, BETWEEN selects fields between the test values, including the first test value and excluding the last test value.</li>
</ul>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/学习/" rel="tag">#学习</a>
          
            <a href="/tags/笔记/" rel="tag">#笔记</a>
          
            <a href="/tags/SQL/" rel="tag">#SQL</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/11/27/总是糊涂/" rel="next" title="总是糊涂">
                <i class="fa fa-chevron-left"></i> 总是糊涂
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/11/29/SQL学习笔记之二/" rel="prev" title="SQL 学习笔记之二">
                SQL 学习笔记之二 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2016/11/28/SQL学习笔记之一/"
           data-title="SQL 学习笔记之一" data-url="http://rrkaige.com/2016/11/28/SQL学习笔记之一/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="Kane Ren" />
          <p class="site-author-name" itemprop="name">Kane Ren</p>
          <p class="site-description motion-element" itemprop="description">Just Do It!</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">142</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">143</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
			<a title="�ղص���ǩ��ż��Highһ��^_^" rel="alternate" class="mw-harlem_shake_slow wobble shake" href='javascript:(function() {
    function c() {
        var e = document.createElement("link");
        e.setAttribute("type", "text/css");
        e.setAttribute("rel", "stylesheet");
        e.setAttribute("href", f);
        e.setAttribute("class", l);
        document.body.appendChild(e)
    }
 
    function h() {
        var e = document.getElementsByClassName(l);
        for (var t = 0; t < e.length; t++) {
            document.body.removeChild(e[t])
        }
    }
 
    function p() {
        var e = document.createElement("div");
        e.setAttribute("class", a);
        document.body.appendChild(e);
        setTimeout(function() {
            document.body.removeChild(e)
        }, 100)
    }
 
    function d(e) {
        return {
            height : e.offsetHeight,
            width : e.offsetWidth
        }
    }
 
    function v(i) {
        var s = d(i);
        return s.height > e && s.height < n && s.width > t && s.width < r
    }
 
    function m(e) {
        var t = e;
        var n = 0;
        while (!!t) {
            n += t.offsetTop;
            t = t.offsetParent
        }
        return n
    }
 
    function g() {
        var e = document.documentElement;
        if (!!window.innerWidth) {
            return window.innerHeight
        } else if (e && !isNaN(e.clientHeight)) {
            return e.clientHeight
        }
        return 0
    }
 
    function y() {
        if (window.pageYOffset) {
            return window.pageYOffset
        }
        return Math.max(document.documentElement.scrollTop, document.body.scrollTop)
    }
 
    function E(e) {
        var t = m(e);
        return t >= w && t <= b + w
    }
 
    function S() {
        var e = document.createElement("audio");
        e.setAttribute("class", l);
        e.src = i;
        e.loop = false;
        e.addEventListener("canplay", function() {
            setTimeout(function() {
                x(k)
            }, 500);
            setTimeout(function() {
                N();
                p();
                for (var e = 0; e < O.length; e++) {
                    T(O[e])
                }
            }, 15500)
        }, true);
        e.addEventListener("ended", function() {
            N();
            h()
        }, true);
        e.innerHTML = " <p>If you are reading this, it is because your browser does not support the audio element. We recommend that you get a new browser.</p> <p>";
        document.body.appendChild(e);
        e.play()
    }
 
    function x(e) {
        e.className += " " + s + " " + o
    }
 
    function T(e) {
        e.className += " " + s + " " + u[Math.floor(Math.random() * u.length)]
    }
 
    function N() {
        var e = document.getElementsByClassName(s);
        var t = new RegExp("\\b" + s + "\\b");
        for (var n = 0; n < e.length; ) {
            e[n].className = e[n].className.replace(t, "")
        }
    }
 
    var e = 30;
    var t = 30;
    var n = 350;
    var r = 350;
    var i = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake.mp3";
    var s = "mw-harlem_shake_me";
    var o = "im_first";
    var u = ["im_drunk", "im_baked", "im_trippin", "im_blown"];
    var a = "mw-strobe_light";
    var f = "//s3.amazonaws.com/moovweb-marketing/playground/harlem-shake-style.css";
    var l = "mw_added_css";
    var b = g();
    var w = y();
    var C = document.getElementsByTagName("*");
    var k = null;
    for (var L = 0; L < C.length; L++) {
        var A = C[L];
        if (v(A)) {
            if (E(A)) {
                k = A;
                break
            }
        }
    }
    if (A === null) {
        console.warn("Could not find a node of the right size. Please try a different page.");
        return
    }
    c();
    S();
    var O = [];
    for (var L = 0; L < C.length; L++) {
        var A = C[L];
        if (v(A)) {
            O.push(A)
        }
    }
})()'><i class="fa fa-music"></i> High</a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/kaneren" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Introduction"><span class="nav-number">1.</span> <span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Syntax"><span class="nav-number">2.</span> <span class="nav-text">Syntax</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SELECT-Statement"><span class="nav-number">3.</span> <span class="nav-text">SELECT Statement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SELECT-DISTINCT-Statement"><span class="nav-number">4.</span> <span class="nav-text">SELECT DISTINCT Statement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#WHERE-Clause"><span class="nav-number">5.</span> <span class="nav-text">WHERE Clause</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AND-amp-OR-Operators"><span class="nav-number">6.</span> <span class="nav-text">AND & OR Operators</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ORDER-BY-Keyword"><span class="nav-number">7.</span> <span class="nav-text">ORDER BY Keyword</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#INSERT-INTO-Statement"><span class="nav-number">8.</span> <span class="nav-text">INSERT INTO Statement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UPDATE-Statement"><span class="nav-number">9.</span> <span class="nav-text">UPDATE Statement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DELETE-Statement"><span class="nav-number">10.</span> <span class="nav-text">DELETE Statement</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Injection"><span class="nav-number">11.</span> <span class="nav-text">Injection</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Based-on-1-1-is-Always-True"><span class="nav-number">11.1.</span> <span class="nav-text">Based on 1=1 is Always True</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Based-on-“”-””-is-Always-True"><span class="nav-number">11.2.</span> <span class="nav-text">Based on “”=”” is Always True</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Based-on-Batched-SQL-Statements"><span class="nav-number">11.3.</span> <span class="nav-text">Based on Batched SQL Statements</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Parameters-for-Protection"><span class="nav-number">11.4.</span> <span class="nav-text">Parameters for Protection</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SELECT-TOP-Clause"><span class="nav-number">12.</span> <span class="nav-text">SELECT TOP Clause</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LIKE-Operator"><span class="nav-number">13.</span> <span class="nav-text">LIKE Operator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Wildcards"><span class="nav-number">14.</span> <span class="nav-text">Wildcards</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IN-Operator"><span class="nav-number">15.</span> <span class="nav-text">IN Operator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BETWEEN-Operator"><span class="nav-number">16.</span> <span class="nav-text">BETWEEN Operator</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear" style="color: black;">2016</span>
  <span class="with-love">
    <i class="fa fa-heart" style="color: red;"></i>
  </span>
  <span class="author" itemprop="copyrightHolder" style="color: black;">Kane Ren</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"rrkaige"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });

                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("YW05a4T5MDoaIXON9PbvC9v7-gzGzoHsz", "u0hT5wDpjTJbj43rEwaY8qHu");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0+"°C");
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time+"°C");
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0+"°C");
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time')+"°C");
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time')+"°C");
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  
  
  <script type="text/javascript" src="/js/src/particle.js"></script>

</body>
</html>
